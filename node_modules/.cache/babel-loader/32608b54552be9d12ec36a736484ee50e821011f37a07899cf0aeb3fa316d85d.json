{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,Outlet}from'react-router-dom';import{toast}from'react-toastify';import{setDocumentTitle}from'../utils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Songbook(){useEffect(()=>{setDocumentTitle('Your Songbook');},[]);const[songs,setSongs]=useState([]);const[isLoaded,setIsLoaded]=useState(false);const fetchSongs=async()=>{// GET\nif(!isLoaded){try{const response=await fetch('http://localhost:3001/songs');if(!response.ok)throw new Error('Failed to fetch songs');const data=await response.json();setSongs(data);setIsLoaded(true);toast.success('Songs loaded successfully!');// Single toast\n}catch(error){console.error('Error:',error);toast.error('Failed to load songs');}}};//DELETE\nconst handleDelete=async id=>{try{const response=await fetch(`http://localhost:3001/songs/${id}`,{method:'DELETE'});if(!response.ok)throw new Error('Failed to delete song');setSongs(songs.filter(song=>song.id!==id));toast.success('Song deleted successfully!');}catch(error){console.error('Error:',error);toast.error('Failed to delete song');}};return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Songbook\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mb-3\",onClick:fetchSongs,children:isLoaded?'Refresh Songs':'Load Songs'}),/*#__PURE__*/_jsx(\"div\",{className:\"list-group\",children:songs.map(song=>/*#__PURE__*/_jsxs(\"div\",{className:\"list-group-item d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(Link,{to:`/songbook/${song.id}`,className:\"text-decoration-none\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-1\",children:song.title}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:song.artist})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn-sm ms-2\",onClick:()=>handleDelete(song.id),children:\"Delete\"})]},song.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsx(Outlet,{})})]})});}","map":{"version":3,"names":["React","useState","useEffect","Link","Outlet","toast","setDocumentTitle","jsx","_jsx","jsxs","_jsxs","Songbook","songs","setSongs","isLoaded","setIsLoaded","fetchSongs","response","fetch","ok","Error","data","json","success","error","console","handleDelete","id","method","filter","song","className","children","onClick","map","to","title","artist"],"sources":["/Users/mavix/Desktop/React ITP 404/final-project/src/Pages/Songbook.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, Outlet } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { setDocumentTitle } from '../utils';\n\nexport default function Songbook() {\n  useEffect(() => {\n    setDocumentTitle('Your Songbook');\n  }, []);\n  const [songs, setSongs] = useState([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  const fetchSongs = async () => {\n  // GET\n  if (!isLoaded) {\n    try {\n      const response = await fetch('http://localhost:3001/songs');\n      if (!response.ok) throw new Error('Failed to fetch songs');\n      const data = await response.json();\n      setSongs(data);\n      setIsLoaded(true);\n      toast.success('Songs loaded successfully!');  // Single toast\n    } catch (error) {\n      console.error('Error:', error);\n      toast.error('Failed to load songs');\n    }\n  }\n};\n\n//DELETE\nconst handleDelete = async (id) => {\n    try {\n      const response = await fetch(`http://localhost:3001/songs/${id}`, {\n        method: 'DELETE',\n      });\n      if (!response.ok) throw new Error('Failed to delete song');\n      setSongs(songs.filter(song => song.id !== id));\n      toast.success('Song deleted successfully!');\n    } catch (error) {\n      console.error('Error:', error);\n      toast.error('Failed to delete song');\n    }\n  };\n\n  return (\n    <div className=\"container mt-4\">\n      <div className=\"row\">\n        <div className=\"col-md-4\">\n          <h2>Your Songbook</h2>\n          <button \n            className=\"btn btn-primary mb-3\"\n            onClick={fetchSongs}\n          >\n            {isLoaded ? 'Refresh Songs' : 'Load Songs'}\n          </button>\n          <div className=\"list-group\">\n          {songs.map(song => (\n              <div key={song.id} className=\"list-group-item d-flex justify-content-between align-items-center\">\n                <Link to={`/songbook/${song.id}`} className=\"text-decoration-none\">\n                  <h5 className=\"mb-1\">{song.title}</h5>\n                  <small className=\"text-muted\">{song.artist}</small>\n                  \n\n                </Link>\n                <button \n                  className=\"btn btn-danger btn-sm ms-2\"\n                  onClick={() => handleDelete(song.id)}\n                >\n                  Delete\n                </button>\n              </div>\n            ))}\n          </div>\n        </div>\n        <div className=\"col-md-8\">\n          <Outlet />\n        </div>\n      </div>\n    </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}