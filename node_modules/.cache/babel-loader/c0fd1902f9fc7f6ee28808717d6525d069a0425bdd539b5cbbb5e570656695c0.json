{"ast":null,"code":"import React,{useState,useEffect}from'react';import{toast}from'react-toastify';import SongCard from'../Components/SongCard';import{setDocumentTitle}from'../utils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Search(){useEffect(()=>{setDocumentTitle('Search Songs');},[]);const[searchTerm,setSearchTerm]=useState('');const[searchResults,setSearchResults]=useState([]);const[isSearching,setIsSearching]=useState(false);const handleSearch=async e=>{e.preventDefault();if(!searchTerm.trim()){return;}setIsSearching(true);try{const response=await fetch('http://localhost:3001/songs');if(!response.ok)throw new Error('Failed to fetch songs');const allSongs=await response.json();// Add null checks for all fields being searched\nconst filteredSongs=allSongs.filter(song=>{var _song$title,_song$genre,_song$lyrics,_song$artist;const title=((_song$title=song.title)===null||_song$title===void 0?void 0:_song$title.toLowerCase())||'';const genre=((_song$genre=song.genre)===null||_song$genre===void 0?void 0:_song$genre.toLowerCase())||'';const lyrics=((_song$lyrics=song.lyrics)===null||_song$lyrics===void 0?void 0:_song$lyrics.toLowerCase())||'';const artist=((_song$artist=song.artist)===null||_song$artist===void 0?void 0:_song$artist.toLowerCase())||'';const searchTermLower=searchTerm.toLowerCase();return title.includes(searchTermLower)||genre.includes(searchTermLower)||lyrics.includes(searchTermLower)||artist.includes(searchTermLower);});setSearchResults(filteredSongs);setIsSearching(false);if(filteredSongs.length===0){toast.info('No matching songs found');}}catch(error){console.error('Error:',error);setIsSearching(false);toast.error('Search failed. Please try again.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSearch,className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Search for songs by title, artist, genre, or lyrics...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"submit\",disabled:isSearching,children:isSearching?'Searching...':'Search'})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:isSearching?/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Searching...\"})}):searchResults.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Search Results\"}),searchResults.map(song=>/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(SongCard,{song:song,showActions:false})},song.id))]}):searchTerm&&/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No results found\"})})})]});}","map":{"version":3,"names":["React","useState","useEffect","toast","SongCard","setDocumentTitle","jsx","_jsx","jsxs","_jsxs","Search","searchTerm","setSearchTerm","searchResults","setSearchResults","isSearching","setIsSearching","handleSearch","e","preventDefault","trim","response","fetch","ok","Error","allSongs","json","filteredSongs","filter","song","_song$title","_song$genre","_song$lyrics","_song$artist","title","toLowerCase","genre","lyrics","artist","searchTermLower","includes","length","info","error","console","className","children","onSubmit","type","placeholder","value","onChange","target","disabled","map","showActions","id"],"sources":["/Users/mavix/Desktop/React ITP 404/final-project/src/Pages/Search.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { toast } from 'react-toastify';\nimport SongCard from '../Components/SongCard';\nimport { setDocumentTitle } from '../utils';\n\nexport default function Search() {\n  useEffect(() => {\n    setDocumentTitle('Search Songs');\n  }, []);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n\n  const handleSearch = async (e) => {\n    e.preventDefault();\n    \n    if (!searchTerm.trim()) {\n      return;\n    }\n\n    setIsSearching(true);\n\n    try {\n      const response = await fetch('http://localhost:3001/songs');\n      if (!response.ok) throw new Error('Failed to fetch songs');\n      const allSongs = await response.json();\n\n      // Add null checks for all fields being searched\n      const filteredSongs = allSongs.filter(song => {\n        const title = song.title?.toLowerCase() || '';\n        const genre = song.genre?.toLowerCase() || '';\n        const lyrics = song.lyrics?.toLowerCase() || '';\n        const artist = song.artist?.toLowerCase() || '';\n        const searchTermLower = searchTerm.toLowerCase();\n\n        return title.includes(searchTermLower) ||\n               genre.includes(searchTermLower) ||\n               lyrics.includes(searchTermLower) ||\n               artist.includes(searchTermLower);\n      });\n\n      setSearchResults(filteredSongs);\n      setIsSearching(false);\n\n      if (filteredSongs.length === 0) {\n        toast.info('No matching songs found');\n      }\n\n    } catch (error) {\n      console.error('Error:', error);\n      setIsSearching(false);\n      toast.error('Search failed. Please try again.');\n    }\n  };\n\n  return (\n    <div className=\"container mt-4\">\n      <form onSubmit={handleSearch} className=\"mb-4\">\n        <div className=\"input-group\">\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Search for songs by title, artist, genre, or lyrics...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n          <button \n            className=\"btn btn-primary\" \n            type=\"submit\"\n            disabled={isSearching}\n          >\n            {isSearching ? 'Searching...' : 'Search'}\n          </button>\n        </div>\n      </form>\n\n      <div className=\"row\">\n        {isSearching ? (\n          <div className=\"col\">\n            <p>Searching...</p>\n          </div>\n        ) : searchResults.length > 0 ? (\n          <div className=\"col\">\n            <h3>Search Results</h3>\n            {searchResults.map(song => (\n              <div key={song.id} className=\"mb-3\">\n                <SongCard \n                  song={song}\n                  showActions={false}\n                />\n              </div>\n            ))}\n          </div>\n        ) : searchTerm && (\n          <div className=\"col\">\n            <p>No results found</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}